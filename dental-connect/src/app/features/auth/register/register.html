<section class="auth-card" [@slideIn]>
  <h2>Register</h2>

  <form [formGroup]="form" (ngSubmit)="submit()" novalidate>
 
    <fieldset class="roles">
      <label>
        <input type="radio" value="patient" formControlName="role" />
        Patient
      </label>
      <label>
        <input type="radio" value="dentist" formControlName="role" />
        Dentist
      </label>
    </fieldset>

    <fieldset formGroupName="patient" *ngIf="!isDentist">
      <label>
        <span>Email</span>
        <input type="email" formControlName="email" />
      </label>
      <div class="err"
           *ngIf="patientGroup.controls['email'].touched && patientGroup.controls['email'].invalid">
        Enter a valid email.
      </div>

      <label>
        <span>Password</span>
        <input type="password" formControlName="password" />
      </label>

      <label>
        <span>Repeat Password</span>
        <input type="password" formControlName="repass" />
      </label>
      <div class="err" *ngIf="patientGroup.errors?.['mismatch']">
        Passwords do not match.
      </div>
    </fieldset>

    <fieldset formGroupName="dentist" *ngIf="isDentist">
      <label>
        <span>Email</span>
        <input type="email" formControlName="email" />
      </label>
      <div class="err"
           *ngIf="dentistGroup.controls['email'].touched && dentistGroup.controls['email'].invalid">
        Enter a valid email.
      </div>

      <label>
        <span>Password</span>
        <input type="password" formControlName="password" />
      </label>

      <label>
        <span>Repeat Password</span>
        <input type="password" formControlName="repass" />
      </label>
      <div class="err" *ngIf="dentistGroup.errors?.['mismatch']">
        Passwords do not match.
      </div>

      <label>
        <span>Full Name</span>
        <input type="text" formControlName="fullName" />
      </label>
      <div class="err"
           *ngIf="dentistGroup.controls['fullName'].touched && dentistGroup.controls['fullName'].invalid">
        Full name is required (letters and spaces only).
      </div>

      <label>
        <span>Personal Health Number</span>
        <input type="text" formControlName="personalHealthNumber" />
      </label>
      <div class="err"
           *ngIf="dentistGroup.controls['personalHealthNumber'].touched && dentistGroup.controls['personalHealthNumber'].invalid">
        Health number is required (digits only).
      </div>
    </fieldset>

    <button type="submit" [disabled]="loading || form.invalid">
      {{ loading ? 'Registering...' : 'Register' }}
    </button>

    <p class="alt">
      Have an account? <a routerLink="/login">Login here</a>
    </p>

    <p class="error-banner" *ngIf="error">{{ error }}</p>
  </form>
</section>
